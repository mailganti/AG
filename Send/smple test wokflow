from fastapi import APIRouter, Header, HTTPException

router = APIRouter()

# Completely open endpoint for testing
@router.get("/")
async def get_workflows():
    return [{"id": "test-wf-1", "status": "pending", "message": "NO AUTH"}]

@router.get("/test")
async def test_endpoint():
    return {"message": "Test endpoint working"}

# Endpoint that shows headers
@router.get("/debug")
async def debug_headers(x_admin_token: str = Header(None)):
    return {
        "token_received": x_admin_token,
        "message": "Check if token is being received"
    }






try:
    from api.workflows_simple import router as workflows_router
    app.include_router(workflows_router, prefix="/api/workflows")
    print("✅ Simple workflows routes mounted")
except Exception as e:
    print(f"❌ Simple workflows failed: {e}")
